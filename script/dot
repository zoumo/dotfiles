#!/bin/bash
#
# dot
#
# `dot` handles installation, updates, things like that. Run it periodically
# to make sure you're on the latest and greatest.

set -e

ROOT_PATH="$(dirname $(dirname ${BASH_SOURCE}))"
source $ROOT_PATH/lib/lib.sh

cd $ROOT_PATH

info "preparing the operating system"
sh $HOME/.dotfiles/os/prepare.sh
success "The operating system is ready"

installers=$(find_installer | tr " " "\n")

lang=("python ruby go")

# insatll language support
for installer in $installers
do
    if [[ ${lang[@]} =~ $installer ]]; then
        info "$installer installing"
        sh $HOME/.dotfiles/$installer/install.sh
        success "$installer installed"
    fi
done

# install others
for installer in $installers
do
    if [[ ${lang[@]} =~ $installer ]]; then
        # skip os and python
        continue
    fi
    info "$installer installing"
    sh $HOME/.dotfiles/$installer/install.sh
    success "$installer installed"
done

cd -
